{% extends 'learning/base.html' %}
{% load static %}

{% block content %}
<style>
  /* ‚ú® –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
  .fade-in {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }
  .fade-in.show {
    opacity: 1;
    transform: translateY(0);
  }

  /* üîπ –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç–∞–ø-—Ç—Ä–∏–≥–≥–µ—Ä (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–±–∏–ª–æ–∫) */
  .tap-to-focus {
    position: fixed;
    inset: 0;
    z-index: 999;
    background: transparent;
    border: none;
  }

  @media (min-width: 768px) {
    .tap-to-focus { display: none; } /* Desktop ‚Äî –Ω–µ –Ω—É–∂–µ–Ω */
  }
</style>

<div class="container py-5 fade-in" id="quizCard">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold text-primary">Level {{ answer.session.level.name }}</h3>
    <span class="text-muted">Question {{ question_number }} of {{ total }}</span>
  </div>

  <div class="progress mb-4" style="height: 10px;">
    <div class="progress-bar bg-success" style="width: {{ progress }}%;"></div>
  </div>

  <div class="card shadow-sm border-0 p-4">
    <div class="card-body">
      <h4 class="mb-3 text-dark">Translate this word to Georgian:</h4>
      <h2 class="fw-bold mb-4 text-center text-primary">{{ answer.word.quiz_word }}</h2>

      <form method="post" class="text-center">
        {% csrf_token %}
        <input type="text" name="user_answer" id="user_answer_input"
               class="form-control form-control-lg mb-3 text-center"
               placeholder="Your answer here..." required>
        <button type="submit" class="btn btn-primary px-5">Next</button>
      </form>
    </div>
  </div>
</div>

<!-- üîπ –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ç–∞–ø–∞, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É -->
<button class="tap-to-focus" id="tapToFocus" aria-label="Tap to start typing"></button>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // ‚ú® Fade-in —ç—Ñ—Ñ–µ–∫—Ç
    const quizCard = document.getElementById('quizCard');
    setTimeout(() => quizCard.classList.add('show'), 50);

    const input = document.getElementById('user_answer_input');
    const tapBtn = document.getElementById('tapToFocus');

    // üñ• Desktop ‚Äî —Å—Ç–∞–≤–∏–º —Ñ–æ–∫—É—Å —Å—Ä–∞–∑—É
    if (window.innerWidth >= 768) {
      input.focus();
    }

    // üì± Mobile ‚Äî –ø–µ—Ä–≤—ã–π —Ç–∞–ø –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    tapBtn.addEventListener('click', () => {
      input.focus();
      tapBtn.style.display = 'none';
    });
  });
</script>
{% endblock %}
